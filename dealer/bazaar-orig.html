<!DOCTYPE html>
<!-- /dealer/bazaar.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Black Market</title>

    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- Latest compiled and minified JavaScript -->
    <script src="../js/jquery-2.1.4.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <style>
      .menu {
        margin: 30px;
        font-size: 2em;
      }
      
      .disable {
       pointer-events: none;
       cursor: default;
       color: #000;
       font-weight: bold;
      }
      
      span {
        font-weight: bold;
      }
    </style>

    <script type="text/javascript">
    $(document).ready(function(){
        var credits = JSON.parse(localStorage.getItem("dealer/credits")) || 0;
        $('#credits').text(credits);
        
        $('#buy-button').click(function(e) {
          e.preventDefault();
          $('#buy').removeClass("hidden");
          $('#buy-button').addClass("disable");
          $('#sell').addClass("hidden");
          $('#sell-button').removeClass("disable");
        });
        
        $('#sell-button').click(function(e) {
          e.preventDefault();
          $('#sell').removeClass("hidden");
          $('#sell-button').addClass("disable");
          $('#buy').addClass("hidden");
          $('#buy-button').removeClass("disable");
        });
        
        if (localStorage.getItem("dealer/registry")) {
          $('#registry').addClass("hidden");
        }
        
        if (localStorage.getItem("dealer/stabilizer")) {
          $('#stabilizer').addClass("hidden");
        }
        
        if (localStorage.getItem("dealer/key")) {
          $('#key').addClass("hidden");
        }
        
        if (localStorage.getItem("dealer/hyperfuel")) {
          $('#hyperfuel').addClass("hidden");
        }
        
        if (localStorage.getItem("dealer/password")) {
          $("#password").addClass("hidden");
        } else {
          $('#password-submit').click(function(e) {
            e.preventDefault();
            if ($("#password-input").val().toLocaleLowerCase() == "letmein") {
              localStorage.setItem("dealer/password", true);
              credits += 200;
              localStorage.setItem("dealer/credits", credits);
              $("#password").addClass("hidden");
              $('#credits').text(credits);
            } else {
              $("#password-input").val("");
            }
          });
        }
        
        if (localStorage.getItem("dealer/route")) {
          $("#route").addClass("hidden");
        } else {
          $('#route-submit').click(function(e) {
            e.preventDefault();
            if ($("#route-input").val().toLocaleLowerCase() == "gsgbjpzarku") {
              localStorage.setItem("dealer/route", true);
              credits += 200;
              localStorage.setItem("dealer/credits", credits);
              $("#route").addClass("hidden");
              $("#credits").text(credits);
            } else {
              $("#route-input").val("");
            }
          });
        }
        
        if (localStorage.getItem("dealer/meal")) {
          $("#meal").addClass("hidden");
        } else {
          $("#meal-submit").click(function(e) {
            e.preventDefault();
            if ($("#meal-input").val().toLocaleLowerCase() == "second dessert") {
              localStorage.setItem("dealer/meal", true);
              credits += 200;
              localStorage.setItem("dealer/credits", credits);
              $("#meal").addClass("hidden");
              $("#credits").text(credits);
            } else {
              $("#meal-input").val("");
            }
          });
        }
        
        if (localStorage.getItem("dealer/paradox")) {
          $("#paradox").addClass("hidden");
        } else {
          $("#paradox-submit").click(function(e) {
            e.preventDefault();
            if ($("#paradox-input").val().toLocaleLowerCase().search("memory") >= 0) {
              localStorage.setItem("dealer/paradox", true);
              credits += 200;
              localStorage.setItem("dealer/credits", credits);
              $("#paradox").addClass("hidden");
              $("#credits").text(credits);
            } else {
              $("#paradox-input").val("");
            }
          });
        }
        
        if (localStorage.getItem("dealer/turtle")) {
          $("#turtle").addClass("hidden");
        } else {
          $("#turtle-submit").click(function(e) {
            e.preventDefault();
            if ($("#turtle-input").val().toLocaleLowerCase() == "xuan wu") {
              localStorage.setItem("dealer/turtle", true);
              credits += 500;
              localStorage.setItem("dealer/credits", credits);
              $("#turtle").addClass("hidden");
              $("#credits").text(credits);
            } else {
              $("#turtle-input").val("");
            }
          });
        }
        
        if (localStorage.getItem("dealer/bomb") && !localStorage.getItem("dealer/soldBomb")) {
          $("#bomb").removeClass("hidden");
          $("#sell-bomb").click(function(e) {
            e.preventDefault();
            localStorage.setItem("dealer/soldBomb", true);
            credits += 1000;
            localStorage.setItem("dealer/credits", credits);
            $("#bomb").addClass("hidden");
            $("#credits").text(credits);
          });
        }
    });
    </script>

</head>
<body>
    <div class="container">
      <h1>The Shadow Bazaar</h1>
      <h2>Credits: <span id="credits"/></h2>
      <a href="" id="buy-button" class="menu disable">Buy</a>
      <a href="" id="sell-button" class="menu">Sell</a>
      <div id="buy">
        <ul>
          <li id="registry"><a href="registry">Android Version Registry</a> <span>400 credits</span>
          <p>
            (A list of all registered androids and their software versions.)
          </p>
          </li>
          <li id="stabilizer">
            <a href="stabilizer">Signal Stabilizer</a> <span>400 credits</span>
            <p>
              (An electronic component which reduces noise and jitter in a signal.  Battery included.)
            </p>
          </li>
          <li id="key">
            <a href="key">Strange Key</a> <span>600 credits</span>
            <p>
              (A strange looking key.)
            </p>
          </li>
          <li id="hyperfuel">
            <a href="hyperfuel">Refined Hyperfuel</a> <span>1200 credits</span>
            <p>
              (The most efficient fuel in the world.)
            </p>
          </li>
        </ul>
      </div>
      <div id="sell" class="hidden">
        <ul>
          <li id="password">
            <span>200 credits</span>: <p>Decrypt this password</p>
            <pre>- < while : < if true</pre>
            <form class="navbar-form">
              <div class="form-group">
                <input id="password-input" type="text" class="form-control">
              </div>
              <button id="password-submit" class="btn btn-success">Submit</button>
            </form>
          </li>
          <li id="route">
            <span>200 credits</span>: <p>
              What is the shortest path from Picadilly Circus to Mornington
              Crescent that goes through Great Portland Street without backtracking?
              </p>
              <form class="navbar-form">
              <div class="form-group">
                <input id="route-input" type="text" class="form-control">
              </div>
              <button id="route-submit" class="btn btn-success">Submit</button>
            </form>
          </li>
          <li id="meal">
            <span>200 credits</span>: <p>
              What meal is a lullaby like?
            </p>
            <form class="navbar-form">
              <div class="form-group">
                <input id="meal-input" type="text" class="form-control">
              </div>
              <button id="meal-submit" class="btn btn-success">Submit</button>
            </form>
          </li>
          <li id="paradox">
            <span>200 credits</span>: <p>
              What side effect is caused by close encounters with a paradox?
            </p>
            <form class="navbar-form">
              <div class="form-group">
                <input id="paradox-input" type="text" class="form-control">
              </div>
              <button id="paradox-submit" class="btn btn-success">Submit</button>
            </form>
          </li>
          <li id="turtle">
            <span>500 credits</span>: <p>
              What is the name of the mythical ageless tortoise?
            </p>
            <form class="navbar-form">
              <div class="form-group">
                <input id="turtle-input" type="text" class="form-control">
              </div>
              <button id="turtle-submit" class="btn btn-success">Submit</button>
            </form>
          </li>
          <li id="bomb" class="hidden">
            <span>1000 credits</span>: <p>
              <a href="" id="sell-bomb">sell the bomb</a>
            </p>
          </li>
        </ul>
      </div>
</div>
</body>
</html>